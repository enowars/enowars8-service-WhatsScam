import subprocess
import datetime

def compile_c_program():
    result = subprocess.run(["gcc", "-o", "key_gen", "key_gen.c", "-lgmp"], capture_output=True, text=True)
    if result.returncode == 0:
        print("Compilation successful.")
    else:
        print(f"Compilation failed:\n{result.stderr}")
        exit(1)

def run_c_program():
    command = "./key_gen"
    process = subprocess.Popen(command, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    stdout, stderr = process.communicate()

    if stderr:
        print(f"Errors encountered:\n{stderr.decode('utf-8')}")
        return None, None

    output = stdout.decode('utf-8').strip().split('\n')
    output = list(output)
    return output[0],output[1]



start = datetime.datetime.now()

# Compile the C program
#compile_c_program()

# Run the compiled C program 100 times
valid_results = []

array = []
for i in range(100):
    p, q = run_c_program()
    p = int(p)
    q = int(q)
    # if(p in array):
    #     print("doppelt")
    # else:
    #     array.append(p)

print("Time taken:", datetime.datetime.now() - start)




